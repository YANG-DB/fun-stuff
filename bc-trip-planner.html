<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BC Trip Planner - Vancouver & Beyond</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #2c5364, #203a43, #0f2027);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
            padding: 20px;
        }

        .sidebar {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            max-height: calc(100vh - 250px);
            overflow-y: auto;
        }

        .search-section {
            margin-bottom: 20px;
            position: sticky;
            top: 0;
            background: #f8f9fa;
            padding-bottom: 15px;
            z-index: 10;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 40px 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .search-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
            pointer-events: none;
        }

        .search-results {
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }

        .no-results {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            margin-top: 10px;
        }

        .no-results-text {
            margin-bottom: 10px;
            color: #856404;
        }

        .add-custom-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95em;
            width: 100%;
            transition: background 0.3s;
            margin-bottom: 8px;
        }

        .add-custom-btn:hover {
            background: #5568d3;
        }

        .add-custom-btn.secondary {
            background: #28a745;
        }

        .add-custom-btn.secondary:hover {
            background: #218838;
        }

        .web-search-results {
            margin-top: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        .web-result-item {
            background: white;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            cursor: pointer;
            transition: all 0.3s;
        }

        .web-result-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .web-result-title {
            font-weight: 600;
            color: #2c5364;
            margin-bottom: 5px;
        }

        .web-result-snippet {
            font-size: 0.9em;
            color: #666;
            line-height: 1.4;
            margin-bottom: 5px;
        }

        .web-result-url {
            font-size: 0.8em;
            color: #667eea;
            text-decoration: none;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #667eea;
        }

        .loading::after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            margin: 0;
            color: #2c5364;
        }

        .close {
            font-size: 28px;
            font-weight: bold;
            color: #999;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close:hover {
            color: #333;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        .btn-cancel {
            background: #6c757d;
            color: white;
        }

        .btn-cancel:hover {
            background: #5a6268;
        }

        .location-item.highlighted {
            animation: pulse 0.5s;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .category {
            margin-bottom: 25px;
        }

        .category-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1em;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s;
        }

        .category-header:hover {
            transform: translateX(5px);
        }

        .category-header .icon {
            font-size: 1.3em;
        }

        .locations {
            margin-top: 10px;
        }

        .location-item {
            background: white;
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .location-item:hover {
            transform: translateX(10px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .location-item.selected {
            background: #e8eaf6;
            border-left-color: #4caf50;
        }

        .location-name {
            font-weight: 500;
            flex: 1;
        }

        .add-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background 0.3s;
        }

        .add-btn:hover {
            background: #45a049;
        }

        .add-btn.added {
            background: #ff9800;
        }

        .map-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        #map {
            height: 500px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .trip-planner {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            min-height: 200px;
        }

        .trip-planner h2 {
            color: #2c5364;
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .planned-items {
            display: grid;
            gap: 10px;
        }

        .planned-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .planned-item-info {
            flex: 1;
        }

        .planned-item-name {
            font-weight: bold;
            font-size: 1.1em;
            color: #2c5364;
        }

        .planned-item-category {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .planned-item-description {
            font-size: 0.9em;
            color: #555;
            margin-top: 8px;
            line-height: 1.4;
        }

        .remove-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .remove-btn:hover {
            background: #d32f2f;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #ff9800;
            color: white;
        }

        .btn-secondary:hover {
            background: #f57c00;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.4);
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .empty-state-icon {
            font-size: 4em;
            margin-bottom: 15px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .sidebar {
                max-height: none;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #5568d3;
        }

        .leaflet-popup-content {
            margin: 15px;
        }

        .popup-title {
            font-weight: bold;
            font-size: 1.1em;
            color: #2c5364;
            margin-bottom: 8px;
        }

        .popup-category {
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            display: inline-block;
            margin-bottom: 8px;
        }

        .popup-description {
            font-size: 0.9em;
            color: #555;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üçÅ BC Trip Planner</h1>
            <p>Explore Vancouver & British Columbia with Your Family</p>
        </header>

        <div class="main-content">
            <div class="sidebar">
                <div class="search-section">
                    <div class="search-box">
                        <input
                            type="text"
                            class="search-input"
                            id="searchInput"
                            placeholder="Search destinations..."
                            oninput="handleSearch(this.value)"
                        />
                        <span class="search-icon">üîç</span>
                    </div>
                    <div id="searchResults" class="search-results"></div>
                </div>

                <div class="category">
                    <div class="category-header">
                        <span>üèûÔ∏è Day Trips (All Family)</span>
                    </div>
                    <div class="locations" id="day-trips-all"></div>
                </div>

                <div class="category">
                    <div class="category-header">
                        <span>ü•æ Day Trips (Trails)</span>
                    </div>
                    <div class="locations" id="day-trips-trails"></div>
                </div>

                <div class="category">
                    <div class="category-header">
                        <span>üåÜ Day Trips (City Tour)</span>
                    </div>
                    <div class="locations" id="day-trips-city"></div>
                </div>

                <div class="category">
                    <div class="category-header">
                        <span>üèïÔ∏è Weekend Trips</span>
                    </div>
                    <div class="locations" id="weekend-trips"></div>
                </div>

                <div class="category">
                    <div class="category-header">
                        <span>üå≤ BC Provincial Parks</span>
                    </div>
                    <div class="locations" id="bc-parks"></div>
                </div>
            </div>

            <div class="map-section">
                <div id="map"></div>

                <div class="trip-planner">
                    <h2>üìã Your Trip Plan</h2>
                    <div id="planned-items" class="planned-items">
                        <div class="empty-state">
                            <div class="empty-state-icon">üó∫Ô∏è</div>
                            <p>Start building your trip by selecting locations from the sidebar</p>
                        </div>
                    </div>
                    <div class="controls">
                        <button class="btn btn-primary" onclick="exportPlan()">üì• Export Plan (Text)</button>
                        <button class="btn btn-primary" onclick="exportPlanJSON()">üíæ Save Plan (JSON)</button>
                        <button class="btn btn-primary" onclick="loadPlanJSON()">üìÇ Load Plan (JSON)</button>
                        <button class="btn btn-secondary" onclick="clearPlan()">üóëÔ∏è Clear All</button>
                    </div>
                    <input type="file" id="fileInput" accept=".json" style="display: none;" onchange="handleFileSelect(event)">
                </div>
            </div>
        </div>
    </div>

    <!-- Add Custom Location Modal -->
    <div id="addLocationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ûï Add Custom Location</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <form id="customLocationForm" onsubmit="handleAddCustomLocation(event)">
                <div class="form-group">
                    <label for="locationName">Location Name *</label>
                    <input type="text" id="locationName" required placeholder="e.g., Shannon Falls">
                </div>

                <div class="form-group">
                    <label for="locationCategory">Category *</label>
                    <select id="locationCategory" required>
                        <option value="">Select a category</option>
                        <option value="Day Trip (All Family)">Day Trip (All Family)</option>
                        <option value="Day Trip (Trails)">Day Trip (Trails)</option>
                        <option value="Day Trip (City Tour)">Day Trip (City Tour)</option>
                        <option value="Weekend Trip">Weekend Trip</option>
                        <option value="BC Provincial Park">BC Provincial Park</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="locationLat">Latitude *</label>
                        <input type="number" id="locationLat" step="0.000001" required placeholder="49.2827">
                    </div>
                    <div class="form-group">
                        <label for="locationLng">Longitude *</label>
                        <input type="number" id="locationLng" step="0.000001" required placeholder="-123.1207">
                    </div>
                </div>

                <div class="form-group">
                    <label for="locationDescription">Description *</label>
                    <textarea id="locationDescription" required placeholder="Brief description of the location and what makes it special..."></textarea>
                </div>

                <div class="form-group">
                    <label for="locationSource">Source URL (optional)</label>
                    <input type="url" id="locationSource" placeholder="https://example.com/location-info">
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-cancel" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Location</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Trip destinations data
        const destinations = {
            bcParks: [
                {
                    name: "Garibaldi Provincial Park",
                    lat: 49.9333,
                    lng: -123.0000,
                    description: "Alpine paradise with turquoise Garibaldi Lake, Black Tusk peak, and numerous hiking trails. Popular overnight destination.",
                    category: "BC Provincial Park"
                },
                {
                    name: "Golden Ears Provincial Park",
                    lat: 49.4228,
                    lng: -122.4897,
                    description: "Large park with camping, swimming at Alouette Lake, and challenging hiking trails including Golden Ears summit.",
                    category: "BC Provincial Park"
                },
                {
                    name: "Cypress Provincial Park",
                    lat: 49.3833,
                    lng: -123.2000,
                    description: "Year-round recreation with skiing, snowshoeing in winter and hiking in summer. Easy access from Vancouver.",
                    category: "BC Provincial Park"
                },
                {
                    name: "Mount Seymour Provincial Park",
                    lat: 49.3667,
                    lng: -122.9500,
                    description: "Winter skiing and summer hiking with stunning views. Dog Mountain and other trails are family-friendly.",
                    category: "BC Provincial Park"
                },
                {
                    name: "Porteau Cove Provincial Park",
                    lat: 49.5525,
                    lng: -123.2403,
                    description: "Oceanside camping with stunning views of Howe Sound. Popular for diving, kayaking, and sunsets.",
                    category: "BC Provincial Park"
                },
                {
                    name: "Alice Lake Provincial Park",
                    lat: 49.7722,
                    lng: -123.1233,
                    description: "Four pristine lakes with swimming, canoeing, camping, and easy hiking trails. Great for families near Squamish.",
                    category: "BC Provincial Park"
                },
                {
                    name: "Joffre Lakes Provincial Park",
                    lat: 50.3734,
                    lng: -122.4897,
                    description: "Three stunning turquoise glacial lakes. Moderate 10km round-trip hike with incredible photo opportunities.",
                    category: "BC Provincial Park"
                },
                {
                    name: "Brandywine Falls Provincial Park",
                    lat: 50.0400,
                    lng: -123.1214,
                    description: "Spectacular 70-meter waterfall accessible via short easy trail. Perfect for quick stop between Vancouver and Whistler.",
                    category: "BC Provincial Park"
                },
                {
                    name: "Stawamus Chief Provincial Park",
                    lat: 49.6833,
                    lng: -123.1500,
                    description: "Iconic granite monolith with challenging hiking trails offering panoramic views of Squamish and Howe Sound.",
                    category: "BC Provincial Park"
                },
                {
                    name: "Shannon Falls Provincial Park",
                    lat: 49.6722,
                    lng: -123.1508,
                    description: "BC's third highest waterfall at 335 meters. Easy 5-minute walk from parking lot to viewing platform.",
                    category: "BC Provincial Park"
                },
                {
                    name: "Cultus Lake Provincial Park",
                    lat: 49.0500,
                    lng: -121.9833,
                    description: "Popular summer destination with lake swimming, water sports, camping, and multiple beaches. 1.5 hours from Vancouver.",
                    category: "BC Provincial Park"
                },
                {
                    name: "E.C. Manning Provincial Park",
                    lat: 49.0667,
                    lng: -120.7833,
                    description: "Year-round park with alpine meadows, wildlife viewing, skiing, and hiking. Gateway to the Cascade Mountains.",
                    category: "BC Provincial Park"
                }
            ],
            dayTripsAll: [
                {
                    name: "Capilano Suspension Bridge",
                    lat: 49.3429,
                    lng: -123.1149,
                    description: "Walk among the treetops on suspension bridges, perfect for all ages. Includes Cliffwalk and Treetops Adventure.",
                    category: "Day Trip (All Family)"
                },
                {
                    name: "Stanley Park",
                    lat: 49.3044,
                    lng: -123.1443,
                    description: "Vancouver's famous urban park with seawall, beaches, totem poles, and Vancouver Aquarium. Great for biking and walking.",
                    category: "Day Trip (All Family)"
                },
                {
                    name: "Granville Island",
                    lat: 49.2714,
                    lng: -123.1343,
                    description: "Public market, artisan shops, street performers, and waterfront dining. Family-friendly atmosphere.",
                    category: "Day Trip (All Family)"
                },
                {
                    name: "Grouse Mountain",
                    lat: 49.3809,
                    lng: -123.0819,
                    description: "Scenic gondola ride, wildlife refuge with bears and wolves, lumberjack shows, and hiking trails.",
                    category: "Day Trip (All Family)"
                },
                {
                    name: "Lynn Canyon Park",
                    lat: 49.3441,
                    lng: -123.0231,
                    description: "Free suspension bridge, swimming holes, waterfalls, and easy forest trails. Less crowded than Capilano.",
                    category: "Day Trip (All Family)"
                },
                {
                    name: "Steveston Village",
                    lat: 49.1253,
                    lng: -123.1777,
                    description: "Historic fishing village with fresh seafood, boardwalk, Gulf of Georgia Cannery museum, and waterfront parks.",
                    category: "Day Trip (All Family)"
                }
            ],
            dayTripsTrails: [
                {
                    name: "Quarry Rock (Deep Cove)",
                    lat: 49.3292,
                    lng: -122.9476,
                    description: "Popular 3.8km trail with stunning views of Indian Arm. Moderate difficulty, suitable for families with older kids.",
                    category: "Day Trip (Trails)"
                },
                {
                    name: "Lighthouse Park",
                    lat: 49.3342,
                    lng: -123.2630,
                    description: "Old-growth forest trails leading to Point Atkinson Lighthouse. Multiple trail options from easy to moderate.",
                    category: "Day Trip (Trails)"
                },
                {
                    name: "Dog Mountain Trail",
                    lat: 49.4356,
                    lng: -123.2106,
                    description: "Moderate 7km trail on Mount Seymour with panoramic views. Best in summer and fall.",
                    category: "Day Trip (Trails)"
                },
                {
                    name: "Joffre Lakes",
                    lat: 50.3734,
                    lng: -122.4897,
                    description: "Stunning turquoise glacier-fed lakes. 10km moderate trail with three beautiful lakes. 2.5 hour drive from Vancouver.",
                    category: "Day Trip (Trails)"
                },
                {
                    name: "Tunnel Bluffs",
                    lat: 49.6628,
                    lng: -123.1953,
                    description: "Moderate 8km hike near Squamish with incredible views of Howe Sound. Exposed cliff sections.",
                    category: "Day Trip (Trails)"
                },
                {
                    name: "Stawamus Chief",
                    lat: 49.6818,
                    lng: -123.1572,
                    description: "Challenging hike up granite monolith in Squamish. Three peaks available, first peak is 4km round trip.",
                    category: "Day Trip (Trails)"
                }
            ],
            dayTripsCity: [
                {
                    name: "Gastown & Waterfront",
                    lat: 49.2839,
                    lng: -123.1086,
                    description: "Historic neighborhood with steam clock, cobblestone streets, boutique shops, and restaurants.",
                    category: "Day Trip (City Tour)"
                },
                {
                    name: "Vancouver Art Gallery",
                    lat: 49.2828,
                    lng: -123.1207,
                    description: "Major art gallery featuring Emily Carr and contemporary exhibitions. Located in historic courthouse.",
                    category: "Day Trip (City Tour)"
                },
                {
                    name: "Science World",
                    lat: 49.2734,
                    lng: -123.1038,
                    description: "Interactive science museum with OMNIMAX theatre. Perfect for kids and families.",
                    category: "Day Trip (City Tour)"
                },
                {
                    name: "VanDusen Botanical Garden",
                    lat: 49.2391,
                    lng: -123.1329,
                    description: "55-acre garden with plants from around the world. Beautiful in all seasons, especially during Festival of Lights.",
                    category: "Day Trip (City Tour)"
                },
                {
                    name: "Museum of Anthropology (UBC)",
                    lat: 49.2693,
                    lng: -123.2590,
                    description: "World-class collection of Northwest Coast First Nations art and artifacts on beautiful waterfront campus.",
                    category: "Day Trip (City Tour)"
                },
                {
                    name: "Richmond Night Market",
                    lat: 49.1877,
                    lng: -123.1368,
                    description: "Summer night market (May-Oct) with Asian street food, shopping, and entertainment. Open evenings.",
                    category: "Day Trip (City Tour)"
                }
            ],
            weekendTrips: [
                {
                    name: "Whistler",
                    lat: 50.1163,
                    lng: -122.9574,
                    description: "Year-round mountain resort. Winter skiing, summer hiking, mountain biking, and Peak 2 Peak gondola. World-class village.",
                    category: "Weekend Trip"
                },
                {
                    name: "Victoria & Butchart Gardens",
                    lat: 48.4284,
                    lng: -123.3656,
                    description: "BC's capital city. Parliament Buildings, Inner Harbour, Royal BC Museum, and stunning Butchart Gardens. Ferry required.",
                    category: "Weekend Trip"
                },
                {
                    name: "Tofino",
                    lat: 49.1530,
                    lng: -125.9073,
                    description: "Wild Pacific coast with surfing, storm watching, ancient rainforest, and hot springs. 4.5 hour drive + ferry.",
                    category: "Weekend Trip"
                },
                {
                    name: "Okanagan Valley",
                    lat: 49.8839,
                    lng: -119.4960,
                    description: "Wine country with lake beaches, wineries, fruit orchards, and water sports. Kelowna/Penticton area. 4 hour drive.",
                    category: "Weekend Trip"
                },
                {
                    name: "Gulf Islands",
                    lat: 48.8500,
                    lng: -123.3300,
                    description: "Salt Spring, Pender, Galiano islands. Artists communities, farmers markets, kayaking, beaches. Ferry access.",
                    category: "Weekend Trip"
                },
                {
                    name: "Sunshine Coast",
                    lat: 49.6342,
                    lng: -124.0183,
                    description: "Gibsons, Sechelt, Powell River. Beaches, hiking, kayaking, art galleries. Ferry from Horseshoe Bay.",
                    category: "Weekend Trip"
                }
            ]
        };

        // Initialize map centered on Vancouver
        const map = L.map('map').setView([49.2827, -123.1207], 10);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors',
            maxZoom: 18
        }).addTo(map);

        // Store markers and custom locations
        const markers = {};
        let selectedLocations = [];
        let customLocations = [];

        // Color coding for categories
        const categoryColors = {
            'Day Trip (All Family)': '#4caf50',
            'Day Trip (Trails)': '#ff9800',
            'Day Trip (City Tour)': '#2196f3',
            'Weekend Trip': '#9c27b0',
            'BC Provincial Park': '#2e7d32'
        };

        // Create custom icons
        function createIcon(category) {
            return L.divIcon({
                className: 'custom-icon',
                html: `<div style="
                    background-color: ${categoryColors[category]};
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    border: 3px solid white;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                "></div>`,
                iconSize: [30, 30],
                iconAnchor: [15, 15]
            });
        }

        // Add markers to map
        function addMarkers(locations, category) {
            locations.forEach(location => {
                const marker = L.marker([location.lat, location.lng], {
                    icon: createIcon(category)
                }).addTo(map);

                marker.bindPopup(`
                    <div class="popup-title">${location.name}</div>
                    <div class="popup-category">${location.category}</div>
                    <div class="popup-description">${location.description}</div>
                `);

                markers[location.name] = marker;
            });
        }

        // Populate sidebar
        function populateSidebar(containerId, locations) {
            const container = document.getElementById(containerId);
            locations.forEach(location => {
                const item = document.createElement('div');
                item.className = 'location-item';
                item.innerHTML = `
                    <span class="location-name">${location.name}</span>
                    <button class="add-btn" onclick="toggleLocation('${location.name}')">Add</button>
                `;
                item.onclick = (e) => {
                    if (e.target.tagName !== 'BUTTON') {
                        markers[location.name].openPopup();
                        map.setView([location.lat, location.lng], 13);
                    }
                };
                container.appendChild(item);
            });
        }

        // Toggle location selection
        function toggleLocation(name) {
            const allLocations = [
                ...destinations.dayTripsAll,
                ...destinations.dayTripsTrails,
                ...destinations.dayTripsCity,
                ...destinations.weekendTrips
            ];

            const location = allLocations.find(l => l.name === name);
            const index = selectedLocations.findIndex(l => l.name === name);

            if (index === -1) {
                selectedLocations.push(location);
            } else {
                selectedLocations.splice(index, 1);
            }

            updatePlanDisplay();
            updateButtonStates();
        }

        // Update button states
        function updateButtonStates() {
            document.querySelectorAll('.location-item').forEach(item => {
                const name = item.querySelector('.location-name').textContent;
                const button = item.querySelector('.add-btn');
                const isSelected = selectedLocations.some(l => l.name === name);

                if (isSelected) {
                    button.textContent = 'Remove';
                    button.classList.add('added');
                    item.classList.add('selected');
                } else {
                    button.textContent = 'Add';
                    button.classList.remove('added');
                    item.classList.remove('selected');
                }
            });
        }

        // Update trip plan display
        function updatePlanDisplay() {
            const container = document.getElementById('planned-items');

            if (selectedLocations.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üó∫Ô∏è</div>
                        <p>Start building your trip by selecting locations from the sidebar</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = selectedLocations.map(location => `
                <div class="planned-item">
                    <div class="planned-item-info">
                        <div class="planned-item-name">${location.name}</div>
                        <div class="planned-item-category">${location.category}</div>
                        <div class="planned-item-description">${location.description}</div>
                    </div>
                    <button class="remove-btn" onclick="toggleLocation('${location.name}')">Remove</button>
                </div>
            `).join('');
        }

        // Export plan
        function exportPlan() {
            if (selectedLocations.length === 0) {
                alert('Please add some locations to your trip plan first!');
                return;
            }

            let text = 'üçÅ BC TRIP PLAN\n';
            text += '=' .repeat(50) + '\n\n';

            const groupedByCategory = selectedLocations.reduce((acc, location) => {
                if (!acc[location.category]) {
                    acc[location.category] = [];
                }
                acc[location.category].push(location);
                return acc;
            }, {});

            Object.entries(groupedByCategory).forEach(([category, locations]) => {
                text += `\n${category}\n`;
                text += '-'.repeat(50) + '\n';
                locations.forEach((location, index) => {
                    text += `\n${index + 1}. ${location.name}\n`;
                    text += `   ${location.description}\n`;
                    text += `   üìç Coordinates: ${location.lat}, ${location.lng}\n`;
                });
            });

            text += '\n\n' + '='.repeat(50);
            text += '\nGenerated by BC Trip Planner';

            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'bc-trip-plan.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Clear plan
        function clearPlan() {
            if (selectedLocations.length === 0) return;

            if (confirm('Are you sure you want to clear your entire trip plan?')) {
                selectedLocations = [];
                updatePlanDisplay();
                updateButtonStates();
            }
        }

        // Export plan as JSON
        function exportPlanJSON() {
            if (selectedLocations.length === 0) {
                alert('Please add some locations to your trip plan first!');
                return;
            }

            const planData = {
                version: '1.0',
                exportDate: new Date().toISOString(),
                planName: prompt('Enter a name for this plan:', 'BC Trip Plan ' + new Date().toLocaleDateString()) || 'BC Trip Plan',
                locations: selectedLocations
            };

            const jsonString = JSON.stringify(planData, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const filename = planData.planName.toLowerCase().replace(/\s+/g, '-') + '.json';
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);

            alert('Plan saved successfully! You can load this plan later to compare with other options.');
        }

        // Load plan from JSON
        function loadPlanJSON() {
            document.getElementById('fileInput').click();
        }

        // Handle file selection
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const planData = JSON.parse(e.target.result);

                    // Validate plan data
                    if (!planData.locations || !Array.isArray(planData.locations)) {
                        throw new Error('Invalid plan format');
                    }

                    // Ask user if they want to replace or merge
                    let shouldReplace = true;
                    if (selectedLocations.length > 0) {
                        shouldReplace = confirm(
                            `You have ${selectedLocations.length} location(s) in your current plan.\n\n` +
                            `Click OK to REPLACE your current plan with "${planData.planName || 'loaded plan'}".\n` +
                            `Click Cancel to MERGE both plans together.`
                        );
                    }

                    if (shouldReplace) {
                        selectedLocations = planData.locations;
                    } else {
                        // Merge - add locations that aren't already selected
                        planData.locations.forEach(location => {
                            if (!selectedLocations.some(l => l.name === location.name)) {
                                selectedLocations.push(location);
                            }
                        });
                    }

                    updatePlanDisplay();
                    updateButtonStates();

                    // Show summary
                    const planInfo = `Plan loaded successfully!\n\n` +
                        `Plan: ${planData.planName || 'Unnamed'}\n` +
                        `Saved: ${planData.exportDate ? new Date(planData.exportDate).toLocaleString() : 'Unknown'}\n` +
                        `Locations: ${planData.locations.length}\n\n` +
                        `Your trip plan now has ${selectedLocations.length} location(s).`;

                    alert(planInfo);

                } catch (error) {
                    alert('Error loading plan: ' + error.message + '\n\nPlease make sure you selected a valid plan file.');
                }
            };
            reader.readAsText(file);

            // Reset file input
            event.target.value = '';
        }

        // Get all locations including custom ones
        function getAllLocations() {
            return [
                ...destinations.dayTripsAll,
                ...destinations.dayTripsTrails,
                ...destinations.dayTripsCity,
                ...destinations.weekendTrips,
                ...destinations.bcParks,
                ...customLocations
            ];
        }

        // Search functionality
        function handleSearch(query) {
            const resultsDiv = document.getElementById('searchResults');
            const allCategories = document.querySelectorAll('.category');

            if (!query.trim()) {
                resultsDiv.innerHTML = '';
                allCategories.forEach(cat => cat.style.display = 'block');
                document.querySelectorAll('.location-item').forEach(item => {
                    item.style.display = 'flex';
                    item.classList.remove('highlighted');
                });
                return;
            }

            const searchTerm = query.toLowerCase();
            const allLocations = getAllLocations();
            const matches = allLocations.filter(loc =>
                loc.name.toLowerCase().includes(searchTerm) ||
                loc.description.toLowerCase().includes(searchTerm) ||
                loc.category.toLowerCase().includes(searchTerm)
            );

            if (matches.length > 0) {
                resultsDiv.innerHTML = `<div style="color: #4caf50;">Found ${matches.length} location(s)</div>`;

                // Hide all items first
                document.querySelectorAll('.location-item').forEach(item => {
                    item.style.display = 'none';
                    item.classList.remove('highlighted');
                });

                // Show and highlight matches
                matches.forEach(match => {
                    const locationItems = document.querySelectorAll('.location-name');
                    locationItems.forEach(item => {
                        if (item.textContent === match.name) {
                            const locationItem = item.closest('.location-item');
                            locationItem.style.display = 'flex';
                            locationItem.classList.add('highlighted');
                        }
                    });
                });

                // Show/hide categories based on matches
                allCategories.forEach(cat => {
                    const visibleItems = cat.querySelectorAll('.location-item[style*="display: flex"]');
                    cat.style.display = visibleItems.length > 0 ? 'block' : 'none';
                });
            } else {
                resultsDiv.innerHTML = `
                    <div class="no-results">
                        <div class="no-results-text">No locations found for "${query}"</div>
                        <button class="add-custom-btn secondary" onclick="searchWeb('${query.replace(/'/g, "\\'")}')">
                            üåê Search Web for "${query}"
                        </button>
                        <button class="add-custom-btn" onclick="openAddLocationModal('${query.replace(/'/g, "\\'")}')">
                            ‚ûï Add Custom Location
                        </button>
                    </div>
                    <div id="webSearchResults" class="web-search-results"></div>
                `;

                // Hide all
                allCategories.forEach(cat => cat.style.display = 'none');
            }
        }

        // Web search functionality
        async function searchWeb(query) {
            const webResultsDiv = document.getElementById('webSearchResults');
            webResultsDiv.innerHTML = '<div class="loading">Searching the web</div>';

            try {
                // Using DuckDuckGo Instant Answer API
                const searchQuery = encodeURIComponent(`${query} British Columbia Canada tourism attractions`);
                const response = await fetch(`https://api.duckduckgo.com/?q=${searchQuery}&format=json&no_html=1&skip_disambig=1`);
                const data = await response.json();

                // Try to get results from RelatedTopics
                let results = [];
                if (data.RelatedTopics && data.RelatedTopics.length > 0) {
                    results = data.RelatedTopics
                        .filter(topic => topic.Text && topic.FirstURL)
                        .slice(0, 5)
                        .map(topic => ({
                            title: topic.Text.split(' - ')[0] || query,
                            snippet: topic.Text,
                            url: topic.FirstURL
                        }));
                }

                if (results.length === 0) {
                    // Fallback: provide manual search links
                    webResultsDiv.innerHTML = `
                        <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
                            <div style="margin-bottom: 10px; color: #666;">Search manually on these sites:</div>
                            <div style="display: flex; flex-direction: column; gap: 8px;">
                                <a href="https://www.google.com/search?q=${encodeURIComponent(query + ' BC British Columbia')}"
                                   target="_blank"
                                   class="web-result-item"
                                   style="text-decoration: none; display: block;">
                                    <div class="web-result-title">üîç Google Search</div>
                                    <div class="web-result-snippet">Search for "${query}" on Google</div>
                                </a>
                                <a href="https://www.tripadvisor.com/Search?q=${encodeURIComponent(query + ' BC')}"
                                   target="_blank"
                                   class="web-result-item"
                                   style="text-decoration: none; display: block;">
                                    <div class="web-result-title">‚úàÔ∏è TripAdvisor</div>
                                    <div class="web-result-snippet">Find reviews and information on TripAdvisor</div>
                                </a>
                                <a href="https://www.hellobc.com/search/?q=${encodeURIComponent(query)}"
                                   target="_blank"
                                   class="web-result-item"
                                   style="text-decoration: none; display: block;">
                                    <div class="web-result-title">üçÅ Hello BC (Tourism BC)</div>
                                    <div class="web-result-snippet">Official BC tourism website</div>
                                </a>
                                <a href="https://en.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(query + ' British Columbia')}"
                                   target="_blank"
                                   class="web-result-item"
                                   style="text-decoration: none; display: block;">
                                    <div class="web-result-title">üìö Wikipedia</div>
                                    <div class="web-result-snippet">Search Wikipedia for information</div>
                                </a>
                            </div>
                            <div style="margin-top: 15px; padding: 10px; background: #e3f2fd; border-radius: 6px; font-size: 0.9em;">
                                üí° <strong>Tip:</strong> Once you find the location online:
                                <ol style="margin: 8px 0 0 20px; line-height: 1.6;">
                                    <li>Note the location name and details</li>
                                    <li>Right-click on Google Maps to get coordinates</li>
                                    <li>Click "Add Custom Location" below to add it</li>
                                </ol>
                            </div>
                        </div>
                    `;
                } else {
                    // Display results
                    const resultsHTML = results.map(result => `
                        <div class="web-result-item" onclick="window.open('${result.url}', '_blank')">
                            <div class="web-result-title">${escapeHtml(result.title)}</div>
                            <div class="web-result-snippet">${escapeHtml(result.snippet)}</div>
                            <a href="${result.url}" target="_blank" class="web-result-url" onclick="event.stopPropagation()">
                                ${result.url}
                            </a>
                        </div>
                    `).join('');

                    webResultsDiv.innerHTML = `
                        <div style="margin-top: 10px;">
                            <div style="color: #4caf50; margin-bottom: 10px; font-weight: 500;">Web Search Results:</div>
                            ${resultsHTML}
                            <div style="margin-top: 15px; padding: 10px; background: #e3f2fd; border-radius: 6px; font-size: 0.9em;">
                                üí° <strong>Tip:</strong> Click a result to learn more, then use "Add Custom Location" to add it to your trip planner.
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Search error:', error);
                // Fallback to manual search links
                webResultsDiv.innerHTML = `
                    <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
                        <div style="margin-bottom: 10px; color: #666;">Search manually on these sites:</div>
                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            <a href="https://www.google.com/search?q=${encodeURIComponent(query + ' BC British Columbia')}"
                               target="_blank"
                               class="web-result-item"
                               style="text-decoration: none; display: block;">
                                <div class="web-result-title">üîç Google Search</div>
                                <div class="web-result-snippet">Search for "${query}" on Google</div>
                            </a>
                            <a href="https://www.tripadvisor.com/Search?q=${encodeURIComponent(query + ' BC')}"
                               target="_blank"
                               class="web-result-item"
                               style="text-decoration: none; display: block;">
                                <div class="web-result-title">‚úàÔ∏è TripAdvisor</div>
                                <div class="web-result-snippet">Find reviews and information on TripAdvisor</div>
                            </a>
                            <a href="https://www.hellobc.com/search/?q=${encodeURIComponent(query)}"
                               target="_blank"
                               class="web-result-item"
                               style="text-decoration: none; display: block;">
                                <div class="web-result-title">üçÅ Hello BC (Tourism BC)</div>
                                <div class="web-result-snippet">Official BC tourism website</div>
                            </a>
                            <a href="https://en.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(query + ' British Columbia')}"
                               target="_blank"
                               class="web-result-item"
                               style="text-decoration: none; display: block;">
                                <div class="web-result-title">üìö Wikipedia</div>
                                <div class="web-result-snippet">Search Wikipedia for information</div>
                            </a>
                        </div>
                        <div style="margin-top: 15px; padding: 10px; background: #e3f2fd; border-radius: 6px; font-size: 0.9em;">
                            üí° <strong>Tip:</strong> Once you find the location online:
                            <ol style="margin: 8px 0 0 20px; line-height: 1.6;">
                                <li>Note the location name and details</li>
                                <li>Right-click on Google Maps to get coordinates</li>
                                <li>Click "Add Custom Location" below to add it</li>
                            </ol>
                        </div>
                    </div>
                `;
            }
        }

        // Helper function to escape HTML
        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, m => map[m]);
        }

        // Modal functions
        function openAddLocationModal(searchQuery = '') {
            const modal = document.getElementById('addLocationModal');
            modal.style.display = 'block';

            if (searchQuery) {
                document.getElementById('locationName').value = searchQuery;
            }
        }

        function closeModal() {
            const modal = document.getElementById('addLocationModal');
            modal.style.display = 'none';
            document.getElementById('customLocationForm').reset();
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('addLocationModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Handle adding custom location
        function handleAddCustomLocation(event) {
            event.preventDefault();

            const name = document.getElementById('locationName').value.trim();
            const category = document.getElementById('locationCategory').value;
            const lat = parseFloat(document.getElementById('locationLat').value);
            const lng = parseFloat(document.getElementById('locationLng').value);
            const description = document.getElementById('locationDescription').value.trim();
            const source = document.getElementById('locationSource').value.trim();

            // Check for duplicates
            const allLocations = getAllLocations();
            if (allLocations.some(loc => loc.name.toLowerCase() === name.toLowerCase())) {
                alert('A location with this name already exists!');
                return;
            }

            // Validate coordinates
            if (lat < 47 || lat > 60 || lng < -140 || lng > -110) {
                if (!confirm('The coordinates seem outside BC. Continue anyway?')) {
                    return;
                }
            }

            // Create new location
            const newLocation = {
                name,
                lat,
                lng,
                description,
                category,
                source,
                custom: true
            };

            customLocations.push(newLocation);

            // Add marker to map
            const marker = L.marker([lat, lng], {
                icon: createIcon(category)
            }).addTo(map);

            marker.bindPopup(`
                <div class="popup-title">${name}</div>
                <div class="popup-category">${category} (Custom)</div>
                <div class="popup-description">${description}</div>
                ${source ? `<div style="margin-top: 8px;"><a href="${source}" target="_blank" style="color: #667eea;">üîó Source</a></div>` : ''}
            `);

            markers[name] = marker;

            // Add to appropriate sidebar category
            const categoryMap = {
                'Day Trip (All Family)': 'day-trips-all',
                'Day Trip (Trails)': 'day-trips-trails',
                'Day Trip (City Tour)': 'day-trips-city',
                'Weekend Trip': 'weekend-trips',
                'BC Provincial Park': 'bc-parks'
            };

            const containerId = categoryMap[category];
            const container = document.getElementById(containerId);
            const item = document.createElement('div');
            item.className = 'location-item';
            item.innerHTML = `
                <span class="location-name">${name} ‚≠ê</span>
                <button class="add-btn" onclick="toggleLocation('${name}')">Add</button>
            `;
            item.onclick = (e) => {
                if (e.target.tagName !== 'BUTTON') {
                    markers[name].openPopup();
                    map.setView([lat, lng], 13);
                }
            };
            container.appendChild(item);

            // Close modal and show success
            closeModal();
            alert(`‚úÖ "${name}" has been added successfully!`);

            // Focus on the new location
            map.setView([lat, lng], 13);
            marker.openPopup();

            // Clear search
            document.getElementById('searchInput').value = '';
            handleSearch('');
        }

        // Initialize
        addMarkers(destinations.dayTripsAll, 'Day Trip (All Family)');
        addMarkers(destinations.dayTripsTrails, 'Day Trip (Trails)');
        addMarkers(destinations.dayTripsCity, 'Day Trip (City Tour)');
        addMarkers(destinations.weekendTrips, 'Weekend Trip');
        addMarkers(destinations.bcParks, 'BC Provincial Park');

        populateSidebar('day-trips-all', destinations.dayTripsAll);
        populateSidebar('day-trips-trails', destinations.dayTripsTrails);
        populateSidebar('day-trips-city', destinations.dayTripsCity);
        populateSidebar('weekend-trips', destinations.weekendTrips);
        populateSidebar('bc-parks', destinations.bcParks);

        // Load custom locations from localStorage if available
        const savedCustomLocations = localStorage.getItem('customLocations');
        if (savedCustomLocations) {
            try {
                const loaded = JSON.parse(savedCustomLocations);
                loaded.forEach(loc => {
                    customLocations.push(loc);

                    // Add marker
                    const marker = L.marker([loc.lat, loc.lng], {
                        icon: createIcon(loc.category)
                    }).addTo(map);

                    marker.bindPopup(`
                        <div class="popup-title">${loc.name}</div>
                        <div class="popup-category">${loc.category} (Custom)</div>
                        <div class="popup-description">${loc.description}</div>
                        ${loc.source ? `<div style="margin-top: 8px;"><a href="${loc.source}" target="_blank" style="color: #667eea;">üîó Source</a></div>` : ''}
                    `);

                    markers[loc.name] = marker;

                    // Add to sidebar
                    const categoryMap = {
                        'Day Trip (All Family)': 'day-trips-all',
                        'Day Trip (Trails)': 'day-trips-trails',
                        'Day Trip (City Tour)': 'day-trips-city',
                        'Weekend Trip': 'weekend-trips',
                        'BC Provincial Park': 'bc-parks'
                    };

                    const containerId = categoryMap[loc.category];
                    const container = document.getElementById(containerId);
                    const item = document.createElement('div');
                    item.className = 'location-item';
                    item.innerHTML = `
                        <span class="location-name">${loc.name} ‚≠ê</span>
                        <button class="add-btn" onclick="toggleLocation('${loc.name}')">Add</button>
                    `;
                    item.onclick = (e) => {
                        if (e.target.tagName !== 'BUTTON') {
                            markers[loc.name].openPopup();
                            map.setView([loc.lat, loc.lng], 13);
                        }
                    };
                    container.appendChild(item);
                });
            } catch (e) {
                console.error('Error loading custom locations:', e);
            }
        }

        // Save custom locations to localStorage whenever they change
        function saveCustomLocations() {
            localStorage.setItem('customLocations', JSON.stringify(customLocations));
        }

        // Update the handleAddCustomLocation to save after adding
        const originalHandleAdd = handleAddCustomLocation;
        handleAddCustomLocation = function(event) {
            originalHandleAdd(event);
            if (!event.defaultPrevented) {
                saveCustomLocations();
            }
        };
    </script>
</body>
</html>
